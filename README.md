# ResearchFlow

**Version 1.1.0** | 便携式学术研究工作流管理工具

ResearchFlow 是一款纯绿色、便携式的桌面应用程序，专为学术研究人员设计，用于管理研究工作流程和文献引用。所有数据均存储在本地项目文件夹中，无需联网，可直接拷贝使用。

---

## ✨ 功能特性

### 📊 流程图设计
- **Pipeline 模块**: 拖拽创建 Input、Process、Decision、Output 四种类型的流程模块
- **方向连接**: 右键拖动可在任意节点间创建带箭头的连接线
- **连接管理**: 右键点击连接线可删除

### 📄 文献管理
- **导入 Markdown**: 拖放 `.md` 文件到画布创建文献引用节点
- **Markdown 预览**: 双击文献节点可展开查看完整内容
- **LaTeX 公式支持**: 自动渲染 `$...$` 行内公式和 `$$...$$` 块级公式

### 📝 Snippet 系统
- **文本 Snippet**: 右键节点添加文本片段
- **图片 Snippet**: 拖放图片或 Ctrl+V 粘贴剪贴板图片
- **来源标注**: 每个 Snippet 显示 "From: [论文标题]" 来源标签
- **深拷贝**: 连接文献节点到 Pipeline 模块时自动复制 Snippets
- **管理操作**: 右键 Snippet 可上移、下移、删除

### 🏷️ 标签系统
- **全局标签**: 左侧面板创建和管理标签
- **拖拽分配**: 拖动标签到节点进行标记
- **点击移除**: 点击节点上的标签可从该节点移除
- **重命名同步**: 重命名标签后自动同步到所有节点

### 💾 数据管理
- **自动保存**: 操作后自动保存项目
- **数据清理**: 保存时自动清理孤立的资源文件
- **便携存储**: 所有数据存储在 `./projects/` 目录

---

## 🚀 快速开始

### 安装依赖

```bash
pip install PyQt6 latex2mathml
```

### 运行应用

```bash
python main.py
```

### 创建项目

1. 启动应用后在欢迎对话框输入项目名称
2. 点击 "Create" 创建新项目
3. 或选择已有项目点击 "Open Selected"

---

## 🎮 操作指南

### 画布操作

| 操作 | 方法 |
|------|------|
| **创建模块** | 从顶部工具栏拖拽模块到画布 |
| **移动节点** | 左键拖动节点 |
| **选择节点** | 左键点击节点 |
| **创建连接** | 右键从源节点拖动到目标节点 (需拖动 >10px) |
| **画布平移** | 中键拖动 |
| **画布缩放** | 滚轮滚动 |
| **导入文献** | 拖放 .md 文件到画布 |

### 节点操作

| 操作 | 方法 |
|------|------|
| **编辑信息** | 双击节点头部区域 |
| **添加 Snippet** | 右键点击节点 → "Add Text Snippet" |
| **删除节点** | 右键点击节点 → "Delete Node" |
| **添加标签** | 从左侧拖动标签到节点 |
| **移除标签** | 点击节点上的标签 |

### Snippet 操作

| 操作 | 方法 |
|------|------|
| **编辑内容** | 双击 Snippet |
| **编辑来源** | 双击 Snippet 底部的来源标签 |
| **调整顺序** | 右键 Snippet → "Move Up/Down" |
| **删除** | 右键 Snippet → "Delete Snippet" |
| **粘贴图片** | 选中节点后 Ctrl+V |

### 连接线操作

| 操作 | 方法 |
|------|------|
| **选择连接** | 左键点击连接线 |
| **删除连接** | 右键点击连接线 → "Delete Connection" |

### 标签管理

| 操作 | 方法 |
|------|------|
| **创建标签** | 左侧输入框输入后按回车或点击 + |
| **重命名** | 右键标签 → "Rename Tag" |
| **删除标签** | 右键标签 → "Delete Tag" |

---

## 📁 项目结构

```
ResearchFlow/
├── main.py              # 应用入口和主窗口
├── models.py            # 数据模型定义
├── graphics_items.py    # 自定义图形项
├── widgets.py           # UI 组件
├── utils.py             # 工具函数和项目管理
├── projects/            # 项目数据目录
│   └── {project_name}/
│       ├── project_data.json   # 项目配置
│       └── assets/
│           ├── papers/         # 导入的 Markdown 文件
│           └── images/         # 导入的图片
└── README.md
```

---

## 🔧 技术栈

- **Python 3.10+**
- **PyQt6** - GUI 框架
- **latex2mathml** - LaTeX 公式渲染 (可选)

---

## 📋 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+N` | 新建项目 |
| `Ctrl+O` | 打开项目 |
| `Ctrl+S` | 保存项目 |
| `Ctrl+V` | 粘贴图片到选中节点 |
| `Ctrl++` | 放大画布 |
| `Ctrl+-` | 缩小画布 |

---

## 📜 许可证

GNU General Public License v3.0

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！
